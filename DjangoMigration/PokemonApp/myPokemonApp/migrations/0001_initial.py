# Generated by Django 4.2.13 on 2026-02-22 13:38

import django.core.validators
from django.db import migrations, models
import django.db.models.deletion
import django.utils.timezone


class Migration(migrations.Migration):

    initial = True

    dependencies = [
    ]

    operations = [
        migrations.CreateModel(
            name='Battle',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('battle_type', models.CharField(choices=[('wild', 'Pokémon sauvage'), ('trainer', 'Dresseur'), ('gym', 'Arène'), ('elite_four', 'Conseil des 4')], max_length=20)),
                ('is_active', models.BooleanField(default=True)),
                ('current_turn', models.IntegerField(default=1)),
                ('weather', models.CharField(blank=True, max_length=20, null=True)),
                ('terrain', models.CharField(blank=True, max_length=20, null=True)),
                ('battle_log', models.JSONField(default=list)),
                ('created_at', models.DateTimeField(auto_now_add=True)),
                ('ended_at', models.DateTimeField(blank=True, null=True)),
            ],
            options={
                'verbose_name': 'Combat',
                'verbose_name_plural': 'Combats',
            },
        ),
        migrations.CreateModel(
            name='GymLeader',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('gym_name', models.CharField(max_length=50)),
                ('gym_city', models.CharField(max_length=50)),
                ('badge_name', models.CharField(max_length=50)),
                ('badge_order', models.IntegerField(unique=True)),
            ],
            options={
                'verbose_name': "Champion d'Arène",
                'verbose_name_plural': "Champions d'Arène",
                'ordering': ['badge_order'],
            },
        ),
        migrations.CreateModel(
            name='Item',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('name', models.CharField(max_length=50)),
                ('description', models.TextField()),
                ('item_type', models.CharField(choices=[('potion', 'Potion'), ('pokeball', 'Poké Ball'), ('evolution', "Pierre d'évolution"), ('status', 'Soin de statut'), ('battle', 'Objet de combat'), ('held', 'Objet tenu'), ('key', 'Objet clé')], max_length=20)),
                ('price', models.IntegerField(default=0)),
                ('heal_amount', models.IntegerField(default=0)),
                ('heal_percentage', models.IntegerField(default=0)),
                ('cures_status', models.BooleanField(default=False)),
                ('specific_status', models.CharField(blank=True, max_length=20, null=True)),
                ('catch_rate_modifier', models.FloatField(default=1.0)),
                ('evolves_pokemon', models.CharField(blank=True, max_length=50, null=True)),
                ('held_effect', models.CharField(blank=True, max_length=100, null=True)),
                ('is_consumable', models.BooleanField(default=True)),
            ],
            options={
                'verbose_name': 'Objet',
                'verbose_name_plural': 'Objets',
            },
        ),
        migrations.CreateModel(
            name='PlayablePokemon',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('nickname', models.CharField(blank=True, max_length=12, null=True)),
                ('level', models.IntegerField(default=5)),
                ('current_exp', models.IntegerField(default=0)),
                ('max_hp', models.IntegerField()),
                ('current_hp', models.IntegerField()),
                ('attack', models.IntegerField()),
                ('defense', models.IntegerField()),
                ('special_attack', models.IntegerField()),
                ('special_defense', models.IntegerField()),
                ('speed', models.IntegerField()),
                ('iv_hp', models.IntegerField(default=0)),
                ('iv_attack', models.IntegerField(default=0)),
                ('iv_defense', models.IntegerField(default=0)),
                ('iv_special_attack', models.IntegerField(default=0)),
                ('iv_special_defense', models.IntegerField(default=0)),
                ('iv_speed', models.IntegerField(default=0)),
                ('ev_hp', models.IntegerField(default=0)),
                ('ev_attack', models.IntegerField(default=0)),
                ('ev_defense', models.IntegerField(default=0)),
                ('ev_special_attack', models.IntegerField(default=0)),
                ('ev_special_defense', models.IntegerField(default=0)),
                ('ev_speed', models.IntegerField(default=0)),
                ('nature', models.CharField(default='Hardy', max_length=20)),
                ('status_condition', models.CharField(blank=True, choices=[('paralysis', 'Paralysie'), ('poison', 'Poison'), ('burn', 'Brûlure'), ('freeze', 'Gel'), ('sleep', 'Sommeil')], max_length=20, null=True)),
                ('sleep_turns', models.IntegerField(default=0)),
                ('attack_stage', models.IntegerField(default=0)),
                ('defense_stage', models.IntegerField(default=0)),
                ('special_attack_stage', models.IntegerField(default=0)),
                ('special_defense_stage', models.IntegerField(default=0)),
                ('speed_stage', models.IntegerField(default=0)),
                ('accuracy_stage', models.IntegerField(default=0)),
                ('evasion_stage', models.IntegerField(default=0)),
                ('friendship', models.IntegerField(default=70)),
                ('original_trainer', models.CharField(max_length=50)),
                ('caught_location', models.CharField(blank=True, max_length=100, null=True)),
                ('pokeball_used', models.CharField(default='pokeball', max_length=20)),
                ('party_position', models.IntegerField(blank=True, null=True)),
                ('is_in_party', models.BooleanField(default=True)),
                ('is_shiny', models.BooleanField(default=False)),
                ('held_item', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='held_by', to='myPokemonApp.item')),
            ],
            options={
                'verbose_name': 'Pokémon (Jouable)',
                'verbose_name_plural': 'Pokémon (Jouables)',
                'ordering': ['party_position'],
            },
        ),
        migrations.CreateModel(
            name='Pokemon',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('name', models.CharField(max_length=50, unique=True)),
                ('pokedex_number', models.IntegerField(unique=True)),
                ('base_hp', models.IntegerField()),
                ('base_attack', models.IntegerField()),
                ('base_defense', models.IntegerField()),
                ('base_special_attack', models.IntegerField()),
                ('base_special_defense', models.IntegerField()),
                ('base_speed', models.IntegerField()),
                ('catch_rate', models.IntegerField(default=45)),
                ('base_experience', models.IntegerField()),
                ('growth_rate', models.CharField(default='medium_fast', max_length=20)),
                ('sprite_url', models.URLField(blank=True, null=True)),
            ],
            options={
                'verbose_name': 'Pokémon (Base)',
                'verbose_name_plural': 'Pokémon (Bases)',
                'ordering': ['pokedex_number'],
            },
        ),
        migrations.CreateModel(
            name='PokemonCenter',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('name', models.CharField(default='Centre Pokémon', max_length=100)),
                ('location', models.CharField(max_length=100)),
                ('nurse_name', models.CharField(default='Infirmière Joy', max_length=50)),
                ('nurse_greeting', models.TextField(default='Bienvenue au Centre Pokémon ! Puis-je soigner vos Pokémon ?')),
                ('nurse_healing_message', models.TextField(default='Vos Pokémon ont été complètement soignés ! Revenez quand vous voulez !')),
                ('nurse_farewell', models.TextField(default='Nous espérons vous revoir bientôt !')),
                ('nurse_sprite', models.CharField(blank=True, max_length=100, null=True)),
                ('is_available', models.BooleanField(default=True)),
                ('healing_cost', models.IntegerField(default=0)),
                ('total_healings', models.IntegerField(default=0)),
            ],
            options={
                'verbose_name': 'Centre Pokémon',
                'verbose_name_plural': 'Centres Pokémon',
            },
        ),
        migrations.CreateModel(
            name='PokemonMove',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('name', models.CharField(max_length=50)),
                ('category', models.CharField(choices=[('physical', 'Physique'), ('special', 'Spécial'), ('status', 'Statut')], max_length=10)),
                ('power', models.IntegerField(default=0)),
                ('accuracy', models.IntegerField(default=100, validators=[django.core.validators.MinValueValidator(0), django.core.validators.MaxValueValidator(100)])),
                ('pp', models.IntegerField(default=5)),
                ('max_pp', models.IntegerField(default=5)),
                ('priority', models.IntegerField(default=0)),
                ('effect', models.CharField(blank=True, max_length=50, null=True)),
                ('effect_chance', models.IntegerField(default=0)),
                ('inflicts_status', models.CharField(blank=True, max_length=20, null=True)),
                ('stat_changes', models.JSONField(blank=True, default=dict)),
            ],
            options={
                'verbose_name': 'Capacité',
                'verbose_name_plural': 'Capacités',
            },
        ),
        migrations.CreateModel(
            name='Shop',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('name', models.CharField(max_length=100)),
                ('shop_type', models.CharField(choices=[('pokemart', 'PokéMart'), ('department', 'Grand Magasin'), ('special', 'Boutique Spéciale')], default='pokemart', max_length=20)),
                ('location', models.CharField(max_length=100)),
                ('description', models.TextField(blank=True, null=True)),
                ('shopkeeper_sprite', models.CharField(blank=True, max_length=100, null=True)),
                ('shopkeeper_greeting', models.TextField(default='Bienvenue au PokéMart!')),
            ],
            options={
                'verbose_name': 'Boutique',
                'verbose_name_plural': 'Boutiques',
            },
        ),
        migrations.CreateModel(
            name='Trainer',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('username', models.CharField(max_length=50)),
                ('trainer_type', models.CharField(choices=[('player', 'Joueur'), ('rival', 'Rival'), ('gym_leader', "Champion d'Arène"), ('elite_four', 'Conseil des 4'), ('champion', 'Maître'), ('trainer', 'Dresseur'), ('wild', 'Sauvage')], max_length=20)),
                ('money', models.IntegerField(default=3000)),
                ('badges', models.IntegerField(default=0)),
                ('location', models.CharField(blank=True, max_length=100, null=True)),
                ('is_defeated', models.BooleanField(default=False)),
                ('can_rebattle', models.BooleanField(default=False)),
                ('intro_text', models.TextField(blank=True, null=True)),
                ('defeat_text', models.TextField(blank=True, null=True)),
                ('victory_text', models.TextField(blank=True, null=True)),
                ('is_npc', models.BooleanField(default=False)),
                ('npc_class', models.CharField(blank=True, max_length=50)),
                ('sprite_name', models.CharField(blank=True, max_length=100)),
            ],
            options={
                'verbose_name': 'Dresseur',
                'verbose_name_plural': 'Dresseurs',
            },
        ),
        migrations.CreateModel(
            name='Zone',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('name', models.CharField(max_length=100, unique=True)),
                ('zone_type', models.CharField(choices=[('route', 'Route'), ('city', 'Ville'), ('cave', 'Grotte'), ('forest', 'Forêt'), ('water', 'Mer'), ('building', 'Bâtiment')], max_length=20)),
                ('description', models.TextField(blank=True)),
                ('recommended_level_min', models.IntegerField(default=1)),
                ('recommended_level_max', models.IntegerField(default=10)),
                ('order', models.IntegerField(default=0, help_text='Ordre dans la progression')),
                ('image', models.CharField(blank=True, max_length=200)),
                ('music', models.CharField(blank=True, max_length=200)),
                ('is_safe_zone', models.BooleanField(default=False, help_text='Pas de wild battles')),
                ('has_pokemon_center', models.BooleanField(default=False)),
                ('has_shop', models.BooleanField(default=False)),
                ('required_badge', models.ForeignKey(blank=True, help_text='Badge requis pour accéder', null=True, on_delete=django.db.models.deletion.SET_NULL, to='myPokemonApp.gymleader')),
                ('required_item', models.ForeignKey(blank=True, help_text='Item requis (ex: Bicyclette)', null=True, on_delete=django.db.models.deletion.SET_NULL, to='myPokemonApp.item')),
            ],
            options={
                'verbose_name': 'Zone',
                'ordering': ['order'],
            },
        ),
        migrations.CreateModel(
            name='WildPokemonSpawn',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('spawn_rate', models.FloatField(default=10.0, help_text="% de chance d'apparition (total zone = 100%)")),
                ('level_min', models.IntegerField(default=2)),
                ('level_max', models.IntegerField(default=5)),
                ('encounter_type', models.CharField(choices=[('grass', 'Hautes herbes'), ('water', 'Surf'), ('fishing', 'Pêche'), ('cave', 'Grotte')], default='grass', max_length=20)),
                ('time_of_day', models.CharField(blank=True, choices=[('', 'Toujours'), ('morning', 'Matin'), ('day', 'Jour'), ('night', 'Nuit')], default='', max_length=20)),
                ('pokemon', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, to='myPokemonApp.pokemon')),
                ('zone', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='wild_spawns', to='myPokemonApp.zone')),
            ],
            options={
                'verbose_name': 'Spawn Pokémon',
                'ordering': ['-spawn_rate'],
            },
        ),
        migrations.CreateModel(
            name='Transaction',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('transaction_type', models.CharField(choices=[('buy', 'Achat'), ('sell', 'Vente')], max_length=10)),
                ('quantity', models.IntegerField()),
                ('unit_price', models.IntegerField()),
                ('total_price', models.IntegerField()),
                ('created_at', models.DateTimeField(auto_now_add=True)),
                ('item', models.ForeignKey(null=True, on_delete=django.db.models.deletion.SET_NULL, to='myPokemonApp.item')),
                ('shop', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, to='myPokemonApp.shop')),
                ('trainer', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='transactions', to='myPokemonApp.trainer')),
            ],
            options={
                'verbose_name': 'Transaction',
                'ordering': ['-created_at'],
            },
        ),
        migrations.CreateModel(
            name='TrainerBattleHistory',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('player_won', models.BooleanField()),
                ('money_earned', models.IntegerField(default=0)),
                ('fought_at', models.DateTimeField(auto_now_add=True)),
                ('battle', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, to='myPokemonApp.battle')),
                ('opponent', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='battle_history_as_opponent', to='myPokemonApp.trainer')),
                ('player', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='battle_history_as_player', to='myPokemonApp.trainer')),
            ],
            options={
                'verbose_name': 'Historique Combat',
                'ordering': ['-fought_at'],
            },
        ),
        migrations.CreateModel(
            name='PokemonType',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('name', models.CharField(max_length=20, unique=True)),
                ('strong_against', models.ManyToManyField(blank=True, related_name='weak_against', to='myPokemonApp.pokemontype')),
            ],
            options={
                'verbose_name': 'Type de Pokémon',
                'verbose_name_plural': 'Types de Pokémon',
            },
        ),
        migrations.CreateModel(
            name='PokemonMoveInstance',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('current_pp', models.IntegerField()),
                ('move', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, to='myPokemonApp.pokemonmove')),
                ('pokemon', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, to='myPokemonApp.playablepokemon')),
            ],
            options={
                'unique_together': {('pokemon', 'move')},
            },
        ),
        migrations.AddField(
            model_name='pokemonmove',
            name='type',
            field=models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, to='myPokemonApp.pokemontype'),
        ),
        migrations.AddField(
            model_name='pokemon',
            name='primary_type',
            field=models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='primary_pokemon', to='myPokemonApp.pokemontype'),
        ),
        migrations.AddField(
            model_name='pokemon',
            name='secondary_type',
            field=models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.CASCADE, related_name='secondary_pokemon', to='myPokemonApp.pokemontype'),
        ),
        migrations.CreateModel(
            name='PlayerLocation',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('updated_at', models.DateTimeField(auto_now=True)),
                ('current_zone', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, to='myPokemonApp.zone')),
                ('last_pokemon_center', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='+', to='myPokemonApp.zone')),
                ('trainer', models.OneToOneField(on_delete=django.db.models.deletion.CASCADE, related_name='player_location', to='myPokemonApp.trainer')),
                ('visited_zones', models.ManyToManyField(blank=True, related_name='visitors', to='myPokemonApp.zone')),
            ],
        ),
        migrations.AddField(
            model_name='playablepokemon',
            name='moves',
            field=models.ManyToManyField(related_name='known_by', through='myPokemonApp.PokemonMoveInstance', to='myPokemonApp.pokemonmove'),
        ),
        migrations.AddField(
            model_name='playablepokemon',
            name='species',
            field=models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, to='myPokemonApp.pokemon'),
        ),
        migrations.AddField(
            model_name='playablepokemon',
            name='trainer',
            field=models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='pokemon_team', to='myPokemonApp.trainer'),
        ),
        migrations.CreateModel(
            name='NurseDialogue',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('dialogue_type', models.CharField(choices=[('greeting', 'Salutation'), ('healing', 'Pendant le soin'), ('complete', 'Soin terminé'), ('farewell', 'Au revoir'), ('special', 'Spécial')], max_length=20)),
                ('text', models.TextField()),
                ('min_badges', models.IntegerField(default=0)),
                ('max_badges', models.IntegerField(default=8)),
                ('rarity', models.IntegerField(default=5)),
                ('center', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.CASCADE, related_name='dialogues', to='myPokemonApp.pokemoncenter')),
            ],
            options={
                'verbose_name': 'Dialogue Infirmière',
                'verbose_name_plural': 'Dialogues Infirmière',
            },
        ),
        migrations.AddField(
            model_name='gymleader',
            name='specialty_type',
            field=models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='gym_leaders', to='myPokemonApp.pokemontype'),
        ),
        migrations.AddField(
            model_name='gymleader',
            name='tm_reward',
            field=models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, to='myPokemonApp.pokemonmove'),
        ),
        migrations.AddField(
            model_name='gymleader',
            name='trainer',
            field=models.OneToOneField(on_delete=django.db.models.deletion.CASCADE, related_name='gym_info', to='myPokemonApp.trainer'),
        ),
        migrations.CreateModel(
            name='CenterVisit',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('visited_at', models.DateTimeField(auto_now_add=True)),
                ('pokemon_healed', models.IntegerField()),
                ('cost', models.IntegerField(default=0)),
                ('center', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='visits', to='myPokemonApp.pokemoncenter')),
                ('trainer', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='center_visits', to='myPokemonApp.trainer')),
            ],
            options={
                'verbose_name': 'Visite Centre',
                'verbose_name_plural': 'Visites Centres',
                'ordering': ['-visited_at'],
            },
        ),
        migrations.CreateModel(
            name='CaptureJournal',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('captured_at', models.DateTimeField(default=django.utils.timezone.now)),
                ('location', models.CharField(blank=True, max_length=100)),
                ('attempts_before_success', models.IntegerField(default=1)),
                ('level_at_capture', models.IntegerField()),
                ('hp_at_capture', models.IntegerField()),
                ('is_first_catch', models.BooleanField(default=False, help_text='Premier de cette espèce')),
                ('is_shiny', models.BooleanField(default=False)),
                ('is_critical_catch', models.BooleanField(default=False, help_text='Capture critique (1 shake)')),
                ('ball_used', models.ForeignKey(null=True, on_delete=django.db.models.deletion.SET_NULL, to='myPokemonApp.item')),
                ('pokemon', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='capture_entry', to='myPokemonApp.playablepokemon')),
                ('trainer', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='capture_journal', to='myPokemonApp.trainer')),
            ],
            options={
                'verbose_name': 'Entrée Journal de Capture',
                'verbose_name_plural': 'Journal de Captures',
                'ordering': ['-captured_at'],
            },
        ),
        migrations.CreateModel(
            name='CaptureAttempt',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('pokemon_level', models.IntegerField()),
                ('pokemon_hp_percent', models.FloatField(help_text='% HP au moment de la capture')),
                ('pokemon_status', models.CharField(blank=True, max_length=20, null=True)),
                ('success', models.BooleanField()),
                ('capture_rate', models.FloatField(help_text='Probabilité calculée (0-1)')),
                ('shakes', models.IntegerField(default=0, help_text='Nombre de shakes avant capture/échec')),
                ('attempted_at', models.DateTimeField(default=django.utils.timezone.now)),
                ('ball_used', models.ForeignKey(null=True, on_delete=django.db.models.deletion.SET_NULL, to='myPokemonApp.item')),
                ('battle', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, to='myPokemonApp.battle')),
                ('pokemon_species', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, to='myPokemonApp.pokemon')),
                ('trainer', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='capture_attempts', to='myPokemonApp.trainer')),
            ],
            options={
                'verbose_name': 'Tentative de Capture',
                'verbose_name_plural': 'Tentatives de Capture',
                'ordering': ['-attempted_at'],
            },
        ),
        migrations.AddField(
            model_name='battle',
            name='opponent_pokemon',
            field=models.ForeignKey(null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='battles_as_opponent_pokemon', to='myPokemonApp.playablepokemon'),
        ),
        migrations.AddField(
            model_name='battle',
            name='opponent_trainer',
            field=models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.CASCADE, related_name='battles_as_opponent', to='myPokemonApp.trainer'),
        ),
        migrations.AddField(
            model_name='battle',
            name='player_pokemon',
            field=models.ForeignKey(null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='battles_as_player_pokemon', to='myPokemonApp.playablepokemon'),
        ),
        migrations.AddField(
            model_name='battle',
            name='player_trainer',
            field=models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='battles_as_player', to='myPokemonApp.trainer'),
        ),
        migrations.AddField(
            model_name='battle',
            name='winner',
            field=models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='won_battles', to='myPokemonApp.trainer'),
        ),
        migrations.CreateModel(
            name='Achievement',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('name', models.CharField(max_length=100, unique=True)),
                ('description', models.TextField()),
                ('category', models.CharField(choices=[('combat', 'Combat'), ('capture', 'Capture'), ('collection', 'Collection'), ('exploration', 'Exploration'), ('progression', 'Progression')], max_length=20)),
                ('required_value', models.IntegerField(default=1)),
                ('reward_money', models.IntegerField(default=0)),
                ('icon', models.CharField(blank=True, max_length=100)),
                ('is_hidden', models.BooleanField(default=False)),
                ('order', models.IntegerField(default=0)),
                ('reward_item', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, to='myPokemonApp.item')),
            ],
            options={
                'ordering': ['order'],
            },
        ),
        migrations.CreateModel(
            name='ZoneConnection',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('is_bidirectional', models.BooleanField(default=True)),
                ('from_zone', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='connections_from', to='myPokemonApp.zone')),
                ('to_zone', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='connections_to', to='myPokemonApp.zone')),
            ],
            options={
                'unique_together': {('from_zone', 'to_zone')},
            },
        ),
        migrations.CreateModel(
            name='TrainerInventory',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('quantity', models.IntegerField(default=1)),
                ('item', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, to='myPokemonApp.item')),
                ('trainer', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='inventory', to='myPokemonApp.trainer')),
            ],
            options={
                'verbose_name': 'Inventaire',
                'unique_together': {('trainer', 'item')},
            },
        ),
        migrations.CreateModel(
            name='TrainerAchievement',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('current_progress', models.IntegerField(default=0)),
                ('is_completed', models.BooleanField(default=False)),
                ('completed_at', models.DateTimeField(blank=True, null=True)),
                ('achievement', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, to='myPokemonApp.achievement')),
                ('trainer', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='achievements', to='myPokemonApp.trainer')),
            ],
            options={
                'unique_together': {('trainer', 'achievement')},
            },
        ),
        migrations.CreateModel(
            name='ShopInventory',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('stock', models.IntegerField(default=-1)),
                ('unlock_badge_required', models.IntegerField(default=0)),
                ('unlock_condition', models.CharField(choices=[('none', 'Aucune condition'), ('has_pokedex', 'Avoir reçu un Pokédex')], default='none', help_text='Condition spéciale requise (ex. avoir reçu un Pokédex)', max_length=30)),
                ('custom_price', models.IntegerField(blank=True, null=True)),
                ('discount_percentage', models.IntegerField(default=0)),
                ('is_featured', models.BooleanField(default=False)),
                ('is_new', models.BooleanField(default=False)),
                ('item', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, to='myPokemonApp.item')),
                ('shop', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='inventory', to='myPokemonApp.shop')),
            ],
            options={
                'verbose_name': 'Inventaire Boutique',
                'ordering': ['-is_featured', '-is_new', 'item__item_type', 'item__name'],
                'unique_together': {('shop', 'item')},
            },
        ),
        migrations.CreateModel(
            name='PokemonLearnableMove',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('level_learned', models.IntegerField()),
                ('move', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, to='myPokemonApp.pokemonmove')),
                ('pokemon', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='learnable_moves', to='myPokemonApp.pokemon')),
            ],
            options={
                'ordering': ['level_learned'],
                'unique_together': {('pokemon', 'move')},
            },
        ),
        migrations.CreateModel(
            name='PokemonEvolution',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('method', models.CharField(choices=[('level', 'Niveau'), ('stone', 'Pierre'), ('trade', 'Échange'), ('friendship', 'Bonheur'), ('item', 'Objet')], max_length=20)),
                ('level', models.IntegerField(blank=True, null=True)),
                ('evolves_to', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='evolutions_to', to='myPokemonApp.pokemon')),
                ('pokemon', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='evolutions_from', to='myPokemonApp.pokemon')),
                ('required_item', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, to='myPokemonApp.item')),
            ],
            options={
                'verbose_name': 'Évolution',
                'unique_together': {('pokemon', 'evolves_to')},
            },
        ),
        migrations.CreateModel(
            name='PokeballItem',
            fields=[
                ('item', models.OneToOneField(on_delete=django.db.models.deletion.CASCADE, primary_key=True, serialize=False, to='myPokemonApp.item')),
                ('bonus_on_status', models.CharField(blank=True, help_text='Bonus si Pokémon a ce status (burn, sleep, etc.)', max_length=20)),
                ('guaranteed_capture', models.BooleanField(default=False, help_text='Master Ball')),
                ('critical_catch_bonus', models.FloatField(default=0.0, help_text='Chance de capture critique')),
                ('bonus_on_type', models.ForeignKey(blank=True, help_text='Bonus sur un type spécifique', null=True, on_delete=django.db.models.deletion.SET_NULL, to='myPokemonApp.pokemontype')),
            ],
            options={
                'verbose_name': 'Poke Ball (Stats)',
                'verbose_name_plural': 'Poke Balls (Stats)',
            },
        ),
        migrations.CreateModel(
            name='GameSave',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('slot', models.IntegerField(default=1, help_text='Numéro du slot (1-3)')),
                ('save_name', models.CharField(blank=True, help_text='Nom personnalisé', max_length=100)),
                ('play_time', models.IntegerField(default=0, help_text='Temps de jeu en secondes')),
                ('current_location', models.CharField(default='Bourg Palette', max_length=100)),
                ('last_pokemon_center', models.CharField(default='Bourg Palette', max_length=100)),
                ('story_flags', models.JSONField(default=dict, help_text='Événements complétés')),
                ('defeated_trainers', models.JSONField(default=list, help_text='IDs des dresseurs battus')),
                ('created_at', models.DateTimeField(auto_now_add=True)),
                ('last_saved', models.DateTimeField(auto_now=True)),
                ('is_active', models.BooleanField(default=True)),
                ('game_snapshot', models.JSONField(blank=True, default=dict)),
                ('trainer', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='game_saves', to='myPokemonApp.trainer')),
            ],
            options={
                'verbose_name': 'Sauvegarde',
                'ordering': ['slot'],
                'unique_together': {('trainer', 'slot')},
            },
        ),
    ]
