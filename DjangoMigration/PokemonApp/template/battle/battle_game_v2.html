{% extends "base.html" %}
{% load static %} {% load custom_filters %}

{% block title %}
<title>Combat - {{ battle.player_pokemon.species.name }} VS {{ battle.opponent_pokemon.species.name }}</title>
{% endblock title %}

{% block content %}

{% if battle.battle_type == 'trainer' or battle.battle_type == 'gym' %}
<!-- ╔══════════════════════════════════════════════════════╗
     ║        TRAINER INTRO OVERLAY                        ║
     ╚══════════════════════════════════════════════════════╝ -->
<div id="trainer-intro-overlay" class="trainer-intro-overlay">

  <!-- Animated background stripes (game-style) -->
  <div class="trainer-intro-bg">
    <div class="trainer-intro-stripes"></div>
  </div>

  <!-- VS Flash -->
  <div class="trainer-intro-vs-flash" id="trainer-vs-flash">VS</div>

  <!-- Trainer sprite (slides in from right) -->
  <div class="trainer-intro-sprite-wrap" id="trainer-intro-sprite-wrap">
    <img id="trainer-intro-sprite"
         class="trainer-intro-sprite"
         src="{% static 'img/trainer_sprites/' %}{{ battle.opponent_trainer.sprite_name }}.png"
         alt="{{ battle.opponent_trainer.get_full_title }}"
         onerror="this.style.display='none'; document.getElementById('trainer-intro-fallback').style.display='flex'">
    <!-- Fallback if no sprite found -->
    <div id="trainer-intro-fallback" style="display:none;" class="trainer-intro-fallback">
      <i class="fas fa-user-circle"></i>
    </div>
  </div>

  <!-- Nameplate (slides up from bottom) -->
  <div class="trainer-intro-nameplate" id="trainer-intro-nameplate">
    {% if battle.opponent_trainer.npc_class %}
    <span class="trainer-intro-class">{{ battle.opponent_trainer.npc_class }}</span>
    {% endif %}
    <span class="trainer-intro-name">{{ battle.opponent_trainer.username }}</span>
  </div>

  <!-- Dialogue box -->
  <div class="trainer-intro-dialogue" id="trainer-intro-dialogue">
    <div class="trainer-dialogue-box">
      <p id="trainer-intro-text" class="trainer-dialogue-text">
        {% if battle.opponent_trainer.intro_text %}
          {{ battle.opponent_trainer.intro_text }}
        {% else %}
          {% if battle.battle_type == 'gym' %}
            Je suis le Champion de cette Arène ! Préparez-vous au combat !
          {% else %}
            Dresseur veut se battre !
          {% endif %}
        {% endif %}
      </p>
      <span class="trainer-dialogue-continue">▼</span>
    </div>
  </div>

</div>
{% endif %}

<!-- Battle Scene Container -->
<!-- Options: grass, water, cave -->
<div class="battle-scene" data-terrain="grass">
  
  <!-- Background Layer -->
  <div class="battle-background">
    <div class="weather-effect" id="weather-container"></div>
    <div class="particles-background" id="particles-bg"></div>
  </div>


  <!-- Zone de combat (sprites et plateformes) -->
  <div class="battlefield">
    
    <!-- LIGNE 1: ADVERSAIRE (Info gauche + Sprite droite) -->
    <div class="row align-items-center opponent-row">
      <!-- Colonne Info Adversaire (gauche) -->
      <div class="col-6 d-flex justify-content-start">
        <div class="info-bar opponent-bar">
          <div class="info-content">
            <div class="name-level-row">
              <span class="pokemon-name" id="opponent-name">
                {% if battle.opponent_pokemon.nickname %}
                  {{ battle.opponent_pokemon.nickname }}
                {% else %}
                  {{ battle.opponent_pokemon.species.name }}
                {% endif %}
                {% if battle.opponent_pokemon.is_shiny %}<span class="shiny-indicator" title="Chromatique !">✨</span>{% endif %}
              </span>
              <span class="pokemon-gender">♂</span>
              <span class="pokemon-level" id="opponent-level">Niv.{{ battle.opponent_pokemon.level }}</span>
            </div>
            
            <!-- HP Bar -->
            <div class="hp-section">
              <div class="hp-label">HP</div>
              <div class="hp-bar-wrapper">
                <div class="hp-bar">
                  {% widthratio battle.opponent_pokemon.current_hp battle.opponent_pokemon.max_hp 100 as opp_hp_percent %}
                  {% with opp_hp_percent_int=opp_hp_percent|default:0|add:0 %}
                  <div class="hp-bar-fill {% if opp_hp_percent_int > 50 %}hp-high{% elif opp_hp_percent_int > 20 %}hp-medium{% else %}hp-low{% endif %}" 
                      id="opponent-hp-bar"
                      style="width: {{ opp_hp_percent }}%">
                    <div class="hp-bar-shine"></div>
                  </div>
                  {% endwith %}
                </div>
              </div>
            </div>

            <!-- Météo -->
            <div id="weather-banner"></div>

            <!-- Badges volatiles adversaire -->
            <div id="opponent-volatile-badges" style="display:flex;flex-wrap:wrap;gap:2px;"></div>
            <span id="opponent-light-screen"></span>
            <span id="opponent-reflect"></span>

            <!-- Stat stages adversaire -->
            <div class="stat-stages-container" id="opponent-stat-stages"></div>

            <!-- Status Icon -->
            <div class="status-container" id="opponent-status">
              {% if battle.opponent_pokemon.status_condition %}
              <span class="status-badge status-{{ battle.opponent_pokemon.status_condition }}">
                {{ battle.opponent_pokemon.get_status_condition_display|upper }}
              </span>
              {% endif %}
            </div>
          </div>
        </div>
      </div>

      <!-- Colonne Sprite Adversaire (droite) -->
      <div class="col-6 d-flex justify-content-end">
        <div class="battle-side opponent-side">
          <div class="pokemon-platform opponent-platform"></div>
          <div class="pokemon-container opponent-container" id="opponent-container">
            <div class="pokemon-shadow"></div>
            <img class="pokemon-sprite opponent-sprite"
                id="opponent-sprite"
                src="{% static 'img/sprites_gen5/' %}{% if battle.opponent_pokemon.is_shiny %}shiny{% else %}normal{% endif %}/{{ battle.opponent_pokemon.species.name|lowerPokemonFileNames }}.png"
                alt="{{ battle.opponent_pokemon.species.name }}"
                onerror="this.src='{% static 'img/pokeball.png' %}'">
          </div>
        </div>
      </div>
    </div>

    <!-- LIGNE 2: JOUEUR (Sprite gauche + Info droite) -->
    <div class="row align-items-center player-row">
      <!-- Colonne Sprite Joueur (gauche) -->
      <div class="col-6 d-flex justify-content-start">
        <div class="battle-side player-side">
          <div class="pokemon-platform player-platform"></div>
          <div class="pokemon-container player-container" id="player-container">
            <div class="pokemon-shadow"></div>
            <img class="pokemon-sprite player-sprite"
                id="player-sprite"
                src="{% static 'img/sprites_gen5/' %}{% if battle.player_pokemon.is_shiny %}back-shiny{% else %}back{% endif %}/{{ battle.player_pokemon.species.name|lowerPokemonFileNames }}.png"
                alt="{{ battle.player_pokemon.species.name }}"
                onerror="this.src='{% static 'img/pokeball.png' %}'">
          </div>
        </div>
      </div>

      <!-- Colonne Info Joueur (droite) -->
      <div class="col-6 d-flex justify-content-end">
        <div class="info-bar player-bar">
          <div class="info-content">
            <div class="name-level-row">
              <span class="pokemon-name" id="player-name">
                {% if battle.player_pokemon.nickname %}
                  {{ battle.player_pokemon.nickname }}
                {% else %}
                  {{ battle.player_pokemon.species.name }}
                {% endif %}
                {% if battle.player_pokemon.is_shiny %}<span class="shiny-indicator" title="Chromatique !">✨</span>{% endif %}
              </span>
              <span class="pokemon-gender">♂</span>
              <span class="pokemon-level" id="player-level">Niv.{{ battle.player_pokemon.level }}</span>
            </div>
            
            <!-- HP Bar -->
            <div class="hp-section">
              <div class="hp-label">HP</div>
              <div class="hp-bar-wrapper">
                <div class="hp-bar">
                  {% widthratio battle.player_pokemon.current_hp battle.player_pokemon.max_hp 100 as player_hp_percent %}
                  {% with player_hp_percent_int=player_hp_percent|default:0|add:0 %}
                  <div class="hp-bar-fill {% if player_hp_percent_int > 50 %}hp-high{% elif player_hp_percent_int > 20 %}hp-medium{% else %}hp-low{% endif %}" 
                      id="player-hp-bar"
                      style="width: {{ player_hp_percent }}%">
                    <div class="hp-bar-shine"></div>
                  </div>
                  {% endwith %}
                </div>
                <div class="hp-text">
                  <span id="player-hp-current">{{ battle.player_pokemon.current_hp }}</span>/<span id="player-hp-max">{{ battle.player_pokemon.max_hp }}</span>
                </div>
              </div>
            </div>

            <!-- EXP Bar (Player only) -->
            <div class="exp-section">
              <div class="exp-bar">
                {% widthratio battle.player_pokemon.current_exp battle.player_pokemon.exp_for_next_level 100 as exp_percent %}
                <div class="exp-bar-fill" style="width: {{ exp_percent|default:0 }}%"></div>
              </div>
            </div>

            <!-- Badges volatiles joueur -->
            <div id="player-volatile-badges" style="display:flex;flex-wrap:wrap;gap:2px;margin-top:2px;"></div>
            <span id="player-light-screen"></span>
            <span id="player-reflect"></span>

            <!-- Stat stages joueur -->
            <div class="stat-stages-container" id="player-stat-stages"></div>

            <!-- Status Icon -->
            <div class="status-container" id="player-status">
              {% if battle.player_pokemon.status_condition %}
              <span class="status-badge status-{{ battle.player_pokemon.status_condition }}">
                {{ battle.player_pokemon.get_status_condition_display|upper }}
              </span>
              {% endif %}
            </div>


          </div>
        </div>
      </div>
    </div>

    <!-- Calque des effets (par-dessus tout) -->
    <div class="effects-layer" id="effects-layer">
      <canvas id="attack-canvas" width="800" height="600"></canvas>
    </div>
  </div>



  <!-- UI Layer -->
  <div class="battle-ui">
    
    <!-- Battle Log (Compact) -->
    <div class="battle-log-compact" id="battle-log-compact">
      <div class="log-messages" id="log-messages"></div>
    </div>

    <!-- Action Menu -->
    <div class="action-panel" id="action-panel">
      
      <!-- Main Menu -->
      <div class="menu-container" id="main-menu">
        <div class="menu-grid">
          <button class="action-btn action-fight" onclick="showMoves()">
            <i class="fas fa-fist-raised"></i>
            <span>Combat</span>
          </button>
          <button class="action-btn action-pokemon" onclick="showTeam()">
            <i class="fas fa-users"></i>
            <span>Pokémon</span>
          </button>
          <button class="action-btn action-bag" onclick="showItems()">
            <i class="fas fa-shopping-bag"></i>
            <span>Sac</span>
          </button>
          <button class="action-btn action-run" onclick="tryRun()">
            <i class="fas fa-running"></i>
            <span>Fuite</span>
          </button>
        </div>
      </div>

      <!-- Moves Menu -->
      <div class="menu-container" id="moves-menu" style="display: none;">
        <div class="menu-header">
          <h4>Choisissez une attaque</h4>
          <button class="btn-back" onclick="showMainMenu()">
            <i class="fas fa-arrow-left"></i> Retour
          </button>
        </div>
        <div class="moves-grid">
          {% for move_instance in battle.player_pokemon.pokemonmoveinstance_set.all %}
          <button class="move-btn move-type-{{ move_instance.move.type.name }}" 
                  onclick="useMove('{{ move_instance.move.id }}')"
                  {% if move_instance.current_pp == 0 %}disabled{% endif %}>
            <div class="move-header">
              <span class="move-name">{{ move_instance.move.name }}</span>
              <span class="move-pp">PP: {{ move_instance.current_pp }}/{{ move_instance.move.pp }}</span>
            </div>
            <div class="move-footer">
              <span class="move-type-badge type-{{ move_instance.move.type.name }}">
                {{ move_instance.move.type.name|upper }}
              </span>
              <img src="{% static 'img/movesTypesSprites/move-'|add:move_instance.move.category|add:'.png' %}"
                   alt="{{ move_instance.move.category }}"
                   title="{{ move_instance.move.get_category_display }}"
                   style="width:18px;height:18px;object-fit:contain;vertical-align:middle;">
              <span class="move-power">
                {% if move_instance.move.power %}PWR: {{ move_instance.move.power }}{% else %}—{% endif %}
              </span>
              <span class="move-accuracy" style="font-size:0.75em;color:#aaa;">
                {% if move_instance.move.accuracy %}PREC: {{ move_instance.move.accuracy }}%{% else %}∞{% endif %}
              </span>
            </div>
          </button>
          {% empty %}
          <p class="text-muted">Aucune attaque disponible</p>
          {% endfor %}
        </div>
      </div>

      <!-- Items Menu -->
      <div class="menu-container" id="items-menu" style="display: none;">
        <div class="menu-header">
          <h4>Choisissez un objet</h4>
          <button class="btn-back" onclick="showMainMenu()">
            <i class="fas fa-arrow-left"></i> Retour
          </button>
        </div>
        <div class="items-list" id="items-list">
          <p class="text-center"><i class="fas fa-spinner fa-spin"></i> Chargement...</p>
        </div>
      </div>

      <!-- Team Menu -->
      <div class="menu-container" id="team-menu" style="display: none;">
        <div class="menu-header">
          <h4>Choisissez un Pokémon</h4>
          <button class="btn-back" onclick="showMainMenu()">
            <i class="fas fa-arrow-left"></i> Retour
          </button>
        </div>
        <div class="team-list" id="team-list">
          <p class="text-center"><i class="fas fa-spinner fa-spin"></i> Chargement...</p>
        </div>
      </div>

    </div>
  </div>

</div>

<!-- Modal de Switch Forcé (quand Pokemon KO) -->
<div class="modal fade" id="forced-switch-modal" tabindex="-1" role="dialog" data-backdrop="static" data-keyboard="false">
  <div class="modal-dialog modal-dialog-centered" role="document">
    <div class="modal-content">
      <div class="modal-header bg-danger text-white">
        <h5 class="modal-title">
          <i class="fas fa-exclamation-triangle"></i> Pokémon K.O. !
        </h5>
      </div>
      <div class="modal-body">
        <p class="text-center mb-3">
          <strong id="fainted-pokemon-name"></strong> est K.O. !<br>
          Choisissez un Pokémon pour le remplacer.
        </p>
        <div id="forced-switch-list">
          <!-- Team list will be loaded here -->
        </div>
      </div>
    </div>
  </div>
</div>

<!-- Modal de Victoire -->
<div class="modal fade" id="victory-modal" tabindex="-1" role="dialog" data-backdrop="static" data-keyboard="false">
  <div class="modal-dialog modal-dialog-centered" role="document">
    <div class="modal-content border-success">
      <div class="modal-header bg-success text-white">
        <h5 class="modal-title">
          <i class="fas fa-trophy"></i> VICTOIRE !
        </h5>
      </div>
      <div class="modal-body text-center">
        <i class="fas fa-trophy fa-5x text-warning mb-3"></i>
        <h4>Vous avez gagné le combat !</h4>
        <p id="victory-exp-message"></p>
      </div>
      <div class="modal-footer">
        {% if battle.battle_type == 'trainer' or battle.battle_type == 'gym' %}
        <button type="button" class="btn btn-success" 
                onclick="window.location.href='{% url 'battle_trainer_complete' battle.id %}'">
          <i class="fas fa-check"></i> Voir les récompenses
        </button>
        {% else %}
        <button type="button" class="btn btn-success" 
                onclick="window.location.href='{% if current_zone %}{% url 'zone_detail' current_zone.id %}{% else %}{% url 'home' %}{% endif %}'">
          <i class="fas fa-map-marker-alt"></i> Retour à la zone
        </button>
        {% endif %}
      </div>
    </div>
  </div>
</div>

<!-- Modal de Défaite -->
<div class="modal fade" id="defeat-modal" tabindex="-1" role="dialog" data-backdrop="static" data-keyboard="false">
  <div class="modal-dialog modal-dialog-centered" role="document">
    <div class="modal-content border-danger">
      <div class="modal-header bg-danger text-white">
        <h5 class="modal-title">
          <i class="fas fa-times-circle"></i> DÉFAITE
        </h5>
      </div>
      <div class="modal-body text-center">
        <i class="fas fa-times-circle fa-5x text-danger mb-3"></i>
        <h4>Vous avez perdu le combat...</h4>
        <p>Tous vos Pokémon sont K.O. Vous êtes transporté au Centre Pokémon.</p>
      </div>
      <div class="modal-footer">
        {% if battle.battle_type == 'trainer' or battle.battle_type == 'gym' %}
        <button type="button" class="btn btn-warning"
                onclick="window.location.href='{% url 'battle_trainer_complete' battle.id %}'">
          <i class="fas fa-hospital"></i> Voir le résultat
        </button>
        {% else %}
        <button type="button" class="btn btn-secondary" onclick="window.location.href='{% if current_zone %}{% url 'zone_detail' current_zone.id %}{% else %}{% url 'home' %}{% endif %}'">
          <i class="fas fa-map-marker-alt"></i> Retour à la zone
        </button>
        {% endif %}
      </div>
    </div>
  </div>
</div>

<!-- Modal de Fuite -->
<div class="modal fade" id="fled-modal" tabindex="-1" role="dialog" data-backdrop="static" data-keyboard="false">
  <div class="modal-dialog modal-dialog-centered" role="document">
    <div class="modal-content border-warning">
      <div class="modal-header bg-warning">
        <h5 class="modal-title">
          <i class="fas fa-running"></i> FUITE
        </h5>
      </div>
      <div class="modal-body text-center">
        <i class="fas fa-running fa-5x text-warning mb-3"></i>
        <h4>Vous avez fui le combat !</h4>
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-warning" onclick="window.location.href='{% if current_zone %}{% url 'zone_detail' current_zone.id %}{% else %}{% url 'home' %}{% endif %}'">
          <i class="fas fa-map-marker-alt"></i> Retour à la zone
        </button>
      </div>
    </div>
  </div>
</div>

<!-- ╔══════════════════════════════════════════════════════╗
     ║          MODAL D'ÉVOLUTION                          ║
     ╚══════════════════════════════════════════════════════╝ -->
<div class="modal fade" id="evolution-modal" tabindex="-1" role="dialog"
     data-backdrop="static" data-keyboard="false">
  <div class="modal-dialog modal-dialog-centered modal-lg" role="document">
    <div class="modal-content evolution-modal-content">

      <!-- Phase 1 : annonce -->
      <div id="evo-phase-announce" class="evo-phase text-center py-4 px-3">
        <p class="evo-subtitle mb-2">Quoi ?!</p>
        <h3 class="evo-title" id="evo-from-name"></h3>
        <p class="evo-subtitle">commence à évoluer !</p>
      </div>

      <!-- Phase 2 : animation des sprites -->
      <div id="evo-phase-anim" class="evo-phase d-none py-3">
        <div class="evo-arena">
          <!-- Sprite AVANT -->
          <div class="evo-sprite-wrap" id="evo-before-wrap">
            <img id="evo-sprite-before" class="evo-sprite" src="" alt="">
            <div class="evo-glow" id="evo-glow"></div>
          </div>
          <!-- Sprite APRÈS (caché au début) -->
          <div class="evo-sprite-wrap d-none" id="evo-after-wrap">
            <img id="evo-sprite-after" class="evo-sprite evo-sprite-reveal" src="" alt="">
          </div>
        </div>
        <div class="evo-flash-overlay" id="evo-flash"></div>
      </div>

      <!-- Phase 3 : résultat + stats -->
      <div id="evo-phase-result" class="evo-phase d-none text-center py-4 px-4">
        <div class="d-flex justify-content-center align-items-center mb-3 gap-3">
          <img id="evo-result-before-sprite" class="evo-result-sprite" src="" alt="">
          <i class="fas fa-arrow-right fa-2x text-warning"></i>
          <img id="evo-result-after-sprite" class="evo-result-sprite evo-result-after-bounce" src="" alt="">
        </div>
        <h4 class="text-warning mb-1">
          <i class="fas fa-star"></i>
          <span id="evo-from-name-2"></span> évolue en
          <strong id="evo-to-name"></strong> !
        </h4>
        <!-- Tableau de comparaison des stats -->
        <div class="evo-stats-table mt-3" id="evo-stats-table"></div>
        <button class="btn btn-warning btn-lg mt-3 px-5" id="evo-confirm-btn" onclick="confirmEvolution()">
          <i class="fas fa-check-circle"></i> Super !
        </button>
      </div>

    </div>
  </div>
</div>
<div class="modal fade" id="learn-move-modal" tabindex="-1" role="dialog" data-backdrop="static" data-keyboard="false">
  <div class="modal-dialog modal-dialog-centered modal-lg" role="document">
    <div class="modal-content border-warning">
      <div class="modal-header" style="background: linear-gradient(135deg, #f5a623, #e67e22); color: white;">
        <h5 class="modal-title">
          <i class="fas fa-bolt"></i> Nouvelle Capacité !
        </h5>
      </div>
      <div class="modal-body">
        <p class="text-center mb-3" id="learn-move-intro">
          <strong id="learn-move-pokemon-name"></strong> veut apprendre
          <strong id="learn-move-new-name" class="text-warning"></strong> !<br>
          <small class="text-muted">Mais il connaît déjà 4 capacités. Quelle capacité voulez-vous oublier ?</small>
        </p>

        <!-- Info sur la nouvelle capacité -->
        <div class="card mb-3 border-warning" id="new-move-card">
          <div class="card-header bg-warning text-white py-1">
            <strong>Nouvelle capacité : <span id="new-move-display-name"></span></strong>
          </div>
          <div class="card-body py-2 d-flex gap-3">
            <span class="badge badge-secondary" id="new-move-type-badge"></span>
            <span class="text-muted" id="new-move-power-display"></span>
            <span class="text-muted" id="new-move-pp-display"></span>
          </div>
        </div>

        <!-- Moves actuels à choisir -->
        <p class="font-weight-bold mb-2">Choisissez la capacité à oublier :</p>
        <div class="row" id="current-moves-list">
          <!-- rempli dynamiquement -->
        </div>
      </div>
      <div class="modal-footer justify-content-between">
        <button type="button" class="btn btn-secondary" onclick="skipLearnMove()">
          <i class="fas fa-times"></i> Ne pas apprendre
        </button>
        <small class="text-muted">Cliquez sur une capacité pour l'oublier et apprendre la nouvelle</small>
      </div>
    </div>
  </div>
</div>

<!-- Audio Elements (preload) -->
<audio id="bgm-battle" loop preload="auto">
  <source src="{% static 'sounds/bgm/battle_wild.mp3' %}" type="audio/mpeg">
</audio>

{% endblock content %}


{% block css %}
{{ block.super }}
<link rel="stylesheet" href="{% static 'css/battle-animations.css' %}">
<link rel="stylesheet" href="{% static 'css/capture-animation.css' %}">
<link rel="stylesheet" href="{% static 'css/battle-ui.css' %}">
{% endblock css %}

{% block js %}
{{ block.super }}
<script src="{% static 'js/battle-effects.js' %}"></script>
<script src="{% static 'js/audio-manager.js' %}"></script>
<script src="{% static 'js/capture-system.js' %}"></script>
<script src="{% static 'js/battle-volatile-states.js' %}"></script>

{# ── BATTLE_CONFIG — toutes les valeurs dynamiques lues par battle-game.js ── #}
<script>
window.BATTLE_CONFIG = {
  battleId:         {{ battle.id }},
  battleType:       '{{ battle.battle_type }}',
  csrfToken:        '{{ csrf_token }}',
  playerPokemonId:  {{ battle.player_pokemon.id }},
  playerTrainerId:  '{{ battle.player_trainer.id }}',
  opponentSpeciesId: '{{ battle.opponent_pokemon.species.id }}',
  playerSpeciesId:   '{{ battle.player_pokemon.species.id }}',

  urls: {
    action:     '{% url "BattleActionView" battle.id %}',
    learnMove:  '{% url "BattleLearnMoveView" battle.id %}',
    getItems:   '{% url "GetTrainerItems" %}',
    getTeam:    '{% url "GetTrainerTeam" %}',
    returnZone: '{% if current_zone %}{% url "zone_detail" current_zone.id %}{% else %}{% url "home" %}{% endif %}',
    myTeam:     '{% url "MyTeamView" %}',
  },

  static: {
    spritesGen5:    '{% static "img/sprites_gen5/" %}',
    spritesNormal:  '{% static "img/sprites_gen5/normal/" %}',
    spritesBack:    '{% static "img/sprites_gen5/back/" %}',
    spritesShiny:   '{% static "img/sprites_gen5/shiny/" %}',
    spritesBackShiny: '{% static "img/sprites_gen5/back-shiny/" %}',
    itemsSprites:   '{% static "img/items_sprites/" %}',
    pokeball:       '{% static "img/pokeball.png" %}',
    evoSound:       '{% static "sounds/pokemon-evolution-sound-effect.mp3" %}',
  },
};
</script>
<script src="{% static 'js/battle-game.js' %}"></script>
{% endblock js %}