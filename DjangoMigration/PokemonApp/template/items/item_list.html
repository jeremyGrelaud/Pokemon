{% extends "base.html" %}
{% load static %}
{% load custom_filters %}

{% block title %}<title>Objets</title>{% endblock %}

{% block content %}
<h1 class="h3 mb-4"><i class="fas fa-shopping-bag"></i> Objets</h1>

<div class="card shadow mb-4">
  <div class="card-body">
    <div class="table-responsive">
      <table class="table table-hover align-middle">
        <thead>
          <tr>
            <th style="width:60px;"></th>
            <th>Nom</th>
            <th>Type</th>
            <th>Prix</th>
            <th>Description</th>
          </tr>
        </thead>
        <tbody>
          {% for item in items %}
          <tr>
            <td class="text-center">
              {% with sprite=item|item_sprite_path %}
                {% if sprite %}
                  <img src="{% static 'img/items_sprites/' %}{{ sprite }}"
                       alt="{{ item.name }}"
                       style="width:40px;height:40px;object-fit:contain;"
                       onerror="this.style.display='none';">
                {% else %}
                  <i class="fas fa-box text-secondary"></i>
                {% endif %}
              {% endwith %}
            </td>
            <td><strong>{{ item.name }}</strong></td>
            <td><span class="badge bg-secondary">{{ item.get_item_type_display }}</span></td>
            <td>{{ item.price }}â‚½</td>
            <td><small class="text-muted">{{ item.description|truncatewords:15 }}</small></td>
          </tr>
          {% endfor %}
        </tbody>
      </table>
    </div>
  </div>
</div>
{% endblock %}