{% extends "base.html" %}
{% load static %}
{% load django_tables2 %}
{% load custom_filters %}

{% block title %}<title>Capacités - Pokémon Gen 1</title>{% endblock %}

{% block content %}
<h1 class="h3 mb-4"><i class="fas fa-bolt"></i> Liste des Capacités</h1>

<!-- Filters -->
<div class="card shadow mb-4">
  <div class="card-body">
    <form method="GET" class="form-inline flex-wrap" style="gap:8px;">
      <input type="text" class="form-control me-2 mb-1" name="searchQuery"
             placeholder="Rechercher..." value="{{ searchQuery }}">
      <select class="form-control me-2 mb-1" name="typeFilter" onchange="this.form.submit()">
        <option value="">Tous les types</option>
        {% for type in types %}
        <option value="{{ type.name }}" {% if typeFilter == type.name %}selected{% endif %}>{{ type.name }}</option>
        {% endfor %}
      </select>
      <select class="form-control me-2 mb-1" name="categoryFilter" onchange="this.form.submit()">
        <option value="">Toutes catégories</option>
        <option value="physical" {% if categoryFilter == 'physical' %}selected{% endif %}>
          Physique
        </option>
        <option value="special" {% if categoryFilter == 'special' %}selected{% endif %}>
          Spécial
        </option>
        <option value="status" {% if categoryFilter == 'status' %}selected{% endif %}>
          Statut
        </option>
      </select>
      <button class="btn btn-primary mb-1" type="submit">
        <i class="fas fa-search"></i>
      </button>
      {% if searchQuery or typeFilter or categoryFilter %}
      <a href="{% url 'PokemonMoveOverView' %}" class="btn btn-secondary mb-1">
        <i class="fas fa-times"></i> Réinitialiser
      </a>
      {% endif %}
    </form>
  </div>
</div>

<!-- Table -->
<div class="card shadow mb-4">
  <div class="card-body">
    {% optimized_render_table table 'table.html' pageObjects %}
  </div>
</div>
{% endblock %}